<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lin.dao.AuthUserMapper">
    <!--    获取用户信息-->
    <select id="getUser" resultType="com.lin.model.AuthUser">
        select client_id clientId, state, secret from auth_user where client_id = #{clientId}
    </select>

    <!--    用户登录-->
    <select id="login" resultType="com.lin.model.AuthUser">
        select client_id clientId, state, secret from auth_user where client_id = #{username} and secret = #{password}
    </select>

    <!--    注册用户-->
    <insert id="register" parameterType="com.lin.dto.RegisterDTO">
        insert into auth_user
        (id, create_time, client_id, secret)
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="registerDTO.id != null ">
                #{registerDTO.id},
            </if>
            <if test="registerDTO.createTime != null ">
                #{registerDTO.createTime},
            </if>
            <if test="registerDTO.username != null ">
                #{registerDTO.username},
            </if>
            <if test="registerDTO.password != null ">
                #{registerDTO.password},
            </if>
        </trim>
    </insert>
</mapper>